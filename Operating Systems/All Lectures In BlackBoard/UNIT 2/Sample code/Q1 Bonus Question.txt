#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdlib.h>

int main()
{
	pid_t pid;

	for (int i =0; i <3; i++)
	{
		if((pid=fork())==0)
		{
			for(int j=0;j<=i;j++)
			{
				if((pid=fork())==0)
				break;
			}
			if (pid!=0)
				for (int k=0;k<i+1;k++)
                                	wait(0);
			sleep(10);
			exit(1);
		}
	}
	for (int i=0;i<3;i++)
        	wait(0);
	sleep(10);
	return 0;
}